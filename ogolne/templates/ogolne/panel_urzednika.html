{% extends "ogolne/base.html" %}

{% block title %}Panel Urzędnika{% endblock %}

{% block content %}
<div class="container mt-5">
    <h1 class="mb-4">Panel Urzędnika</h1>
    <p>Witaj, {{ user.username }}. Wybierz moduł, którym chcesz zarządzać.</p>

    <div class="row">
        {% if perms.akt_urodzenia.view_zgloszenieurodzenia %}
        <div class="col-md-4 mb-4">
            <div class="card">
                <div class="card-body">
                    <h5 class="card-title">Akty Urodzenia</h5>
                    <p class="card-text">Zarządzaj zgłoszeniami urodzeń.</p>
                    <a href="{% url 'akt_urodzenia:lista_zgloszen' %}" class="btn btn-primary">Przejdź do modułu</a>
                </div>
            </div>
        </div>
        {% endif %}

        {% if perms.budownictwo.view_wniosekbudowlany %}
        <div class="col-md-4 mb-4">
            <div class="card">
                <div class="card-body">
                    <h5 class="card-title">Budownictwo</h5>
                    <p class="card-text">Zarządzaj wnioskami o pozwolenie na budowę.</p>
                    {% if 'Urzędnik ds. budownictwa' in user.groups.all|join:", " %}
                        <a href="{% url 'budownictwo:lista_wnioskow_budowlanych' %}" class="btn btn-primary">Weryfikuj wnioski</a>
                    {% endif %}
                    {% if 'Inspektor nadzoru budowlanego' in user.groups.all|join:", " %}
                        <a href="{% url 'budownictwo:lista_wnioskow_budowlanych' %}" class="btn btn-primary">Wydaj decyzje</a>
                    {% endif %}
                </div>
            </div>
        </div>
        {% endif %}

        {% if perms.dotacje.view_wniosekdotacja %}
        <div class="col-md-4 mb-4">
            <div class="card">
                <div class="card-body">
                    <h5 class="card-title">Dotacje</h5>
                    <p class="card-text">Zarządzaj procesem przyznawania dotacji.</p>
                    {% if 'Komisja ds. dotacji' in user.groups.all|join:", " %}
                        <a href="{% url 'dotacje:lista_wnioskow' %}" class="btn btn-primary">Weryfikacja Komisji</a>
                    {% endif %}
                    {% if 'Wójt' in user.groups.all|join:", " %}
                        <a href="{% url 'dotacje:lista_wnioskow' %}" class="btn btn-primary">Rekomendacje dla Wójta</a>
                    {% endif %}
                     {% if 'Urzędnik ds. dotacji' in user.groups.all|join:", " %}
                        <a href="{% url 'dotacje:lista_wnioskow' %}" class="btn btn-primary">Realizacja dotacji</a>
                    {% endif %}
                </div>
            </div>
        </div>
        {% endif %}

        {% if perms.dowody_osobiste.view_wniosekdowod %}
        <div class="col-md-4 mb-4">
            <div class="card">
                <div class="card-body">
                    <h5 class="card-title">Dowody Osobiste</h5>
                    <p class="card-text">Zarządzaj wnioskami o dowód osobisty.</p>
                    <a href="{% url 'dowody_osobiste:lista_wnioskow_dowod' %}" class="btn btn-primary">Przejdź do modułu</a>
                </div>
            </div>
        </div>
        {% endif %}

        {% if perms.rejestracja_samochodu.view_wniosekrejestracja %}
        <div class="col-md-4 mb-4">
            <div class="card">
                <div class="card-body">
                    <h5 class="card-title">Rejestracja Samochodów</h5>
                    <p class="card-text">Zarządzaj wnioskami o rejestrację pojazdów.</p>
                    <a href="{% url 'rejestracja_samochodu:lista_wnioskow_rejestracja' %}" class="btn btn-primary">Przejdź do modułu</a>
                </div>
            </div>
        </div>
        {% endif %}

        {% if perms.odpady.view_deklaracjasmieciowa %}
        <div class="col-md-4 mb-4">
            <div class="card">
                <div class="card-body">
                    <h5 class="card-title">Gospodarka Odpadami</h5>
                    <p class="card-text">Zarządzaj deklaracjami śmieciowymi.</p>
                    <a href="{% url 'odpady:lista_deklaracji' %}" class="btn btn-primary">Przejdź do modułu</a>
                </div>
            </div>
        </div>
        {% endif %}

        </div>
</div>
{% endblock %}